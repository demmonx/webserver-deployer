#!/usr/bin/env bash

# Variable definitions
. .env

usage() {
    shift
    echo "lemp-manager deploy --name=... --ip=... [--cpu=nb --ram=nb (mb)]"
    echo "lemp-manager deploy-multiple <file>"
    echo "lemp-manager update"
    echo "lemp-manager remove <name1> [<name2> ...]"
    echo "lemp-manager start <name1> [<name2> ...]"
    echo "lemp-manager stop <name1> [<name2> ...]"
    echo "lemp-manager help"
    echo "\$ lemp-manager update-hosts"
}

# Check if they are at least 1 param
if [[ $# -eq 0 ]]; then # Error, no args provided
    usage
    exit 1
fi

# Filter the first arg
PARAM=$1
shift
case  in
    deploy)
        lemp-manager-deploy "$@";;
    deploy-multiple)
        lemp-manager-deploy-multiple "$@";;
    update)
        lemp-manager-update "$@";;
    remove)
        lemp-manager-delete "$@";;
    update-hosts)
        lemp-manager-hosts-update "$@";;
    help)
        usage;;
    start)
        lemp-manager-start "$@" ;;
    stop)
        lemp-manager-stop "$@";;
    *)
        echo "ERROR: unknown parameter \"$1\""
        usage
        exit 1
        ;;
esac
